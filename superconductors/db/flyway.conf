# Flyway Configuration for Superconductor Discovery Platform

# Database connection
flyway.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
flyway.user=${DB_USER}
flyway.password=${DB_PASSWORD}

# Schema configuration
flyway.defaultSchema=public
flyway.schemas=public

# Migration settings
flyway.locations=filesystem:./db/migration
flyway.baselineOnMigrate=true
flyway.baselineVersion=0

# Validation
flyway.validateOnMigrate=true
flyway.cleanDisabled=true  # Never clean production!
flyway.outOfOrder=false

# Table names
flyway.table=schema_version

# Encoding
flyway.encoding=UTF-8

# Placeholders for environment-specific values
flyway.placeholders.environment=${ENVIRONMENT}
flyway.placeholders.storage_bucket=${S3_BUCKET}
flyway.placeholders.alert_email=${ALERT_EMAIL}

# Connection pool settings
flyway.connectRetries=3
flyway.connectRetriesInterval=2

# Lock timeout for migrations (milliseconds)
flyway.lockRetryCount=50
flyway.lockRetryDelay=100